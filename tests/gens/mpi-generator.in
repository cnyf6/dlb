#!/bin/bash

cat <<EOF

SRC=@SRCDIR@/src
BUILD=@BUILDDIR@

PERFO_CFLAGS=@PERFO_CFLAGS@
PERFO_CXXFLAGS=@PERFO_CXXFLAGS@
DEBUG_CFLAGS=@DEBUG_CFLAGS@
DEBUG_CXXFLAGS=@DEBUG_CXXFLAGS@

common_includes="-I\$SRC -I\$SRC/LB_numThreads -I\$SRC/LB_policies -I\$SRC/LB_MPI -I\$SRC/LB_comm -I\$SRC/LB_core -I\$SRC/support"

compile_versions=@COMPILE_VERSIONS@

test_CC=@CONFIG_CC@
test_CXX=@CONFIG_CXX@

test_CFLAGS="\$common_includes"
test_CXXFLAGS="\$common_includes"

test_CFLAGS_performance="\$PERFO_CFLAGS"
test_CXXFLAGS_performance="\$PERFO_CXXFLAGS"
test_CFLAGS_debug="\$DEBUG_CFLAGS --debug"
test_CXXFLAGS_debug="\$DEBUG_CXXFLAGS"
test_CFLAGS_instrumentation="\$INSTR_CFLAGS"
test_CXXFLAGS_instrumentation="\$INSTR_CXXFLAGS"
test_CFLAGS_instrumentation_debug="\$INSTRDEBUG_CFLAGS"
test_CXXFLAGS_instrumentation_debug="\$INSTRDEBUG_CXXFLAGS"

test_LDFLAGS_performance="\$BUILD/.libs/libdlb.so \$BUILD/.libs/libdlb_mpi.so"
test_ENV_performance="LD_LIBRARY_PATH=\$BUILD/.libs:$LD_LIBRARY_PATH"

test_LDFLAGS_debug="\$BUILD/.libs/libdlb_dbg.so \$BUILD/.libs/libdlb_mpi_dbg.so"
test_ENV_debug="LD_LIBRARY_PATH=\$BUILD/.libs:$LD_LIBRARY_PATH"

test_ignore=@TEST_IGNORE@
test_ENV="mpirun -n 2 --bind-to-core env"

`@SRCDIR@/tests/gens/config.py $*`
EOF
